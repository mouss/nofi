'use strict';

var CleanCSS = require('clean-css');

function styleParser(styleObjectArray) {
    return new Promise(function (resolve, reject) {
        if (!styleObjectArray && styleObjectArray.length === 0) {
            reject(new Error('missing style section'));
        } else {
            var _iteratorNormalCompletion = true;
            var _didIteratorError = false;
            var _iteratorError = undefined;

            try {
                for (var _iterator = styleObjectArray[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                    var styleObject = _step.value;

                    if (styleObject.lang === 'scss' || styleObject.lang === 'less') {
                        console.error('Sorry please only use plain CSS in your files for now');
                    }
                    var output = new CleanCSS({}).minify(styleObject.content);
                    resolve(output.styles);
                }
            } catch (err) {
                _didIteratorError = true;
                _iteratorError = err;
            } finally {
                try {
                    if (!_iteratorNormalCompletion && _iterator.return) {
                        _iterator.return();
                    }
                } finally {
                    if (_didIteratorError) {
                        throw _iteratorError;
                    }
                }
            }
        }
    });
}

module.exports = styleParser;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9wYXJzZXIvc3R5bGUuanMiXSwibmFtZXMiOlsiQ2xlYW5DU1MiLCJyZXF1aXJlIiwic3R5bGVQYXJzZXIiLCJzdHlsZU9iamVjdEFycmF5IiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJsZW5ndGgiLCJFcnJvciIsInN0eWxlT2JqZWN0IiwibGFuZyIsImNvbnNvbGUiLCJlcnJvciIsIm91dHB1dCIsIm1pbmlmeSIsImNvbnRlbnQiLCJzdHlsZXMiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOztBQUNBLElBQU1BLFdBQVdDLFFBQVEsV0FBUixDQUFqQjs7QUFXQSxTQUFTQyxXQUFULENBQXFCQyxnQkFBckIsRUFBMkU7QUFDdkUsV0FBTyxJQUFJQyxPQUFKLENBQVksVUFBQ0MsT0FBRCxFQUFVQyxNQUFWLEVBQXFCO0FBQ3BDLFlBQUksQ0FBQ0gsZ0JBQUQsSUFBcUJBLGlCQUFpQkksTUFBakIsS0FBNEIsQ0FBckQsRUFBd0Q7QUFDcERELG1CQUFPLElBQUlFLEtBQUosQ0FBVSx1QkFBVixDQUFQO0FBQ0gsU0FGRCxNQUVPO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQ0gscUNBQTBCTCxnQkFBMUIsOEhBQTRDO0FBQUEsd0JBQWpDTSxXQUFpQzs7QUFDeEMsd0JBQUdBLFlBQVlDLElBQVosS0FBcUIsTUFBckIsSUFBK0JELFlBQVlDLElBQVosS0FBcUIsTUFBdkQsRUFBK0Q7QUFDM0RDLGdDQUFRQyxLQUFSLENBQWMsdURBQWQ7QUFDSDtBQUNELHdCQUFNQyxTQUFTLElBQUliLFFBQUosQ0FBYSxFQUFiLEVBQWlCYyxNQUFqQixDQUF3QkwsWUFBWU0sT0FBcEMsQ0FBZjtBQUNBViw0QkFBUVEsT0FBT0csTUFBZjtBQUNIO0FBUEU7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQVFOO0FBQ0osS0FaTSxDQUFQO0FBYUg7O0FBRURDLE9BQU9DLE9BQVAsR0FBaUJoQixXQUFqQiIsImZpbGUiOiJzdHlsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIEBmbG93XG5jb25zdCBDbGVhbkNTUyA9IHJlcXVpcmUoJ2NsZWFuLWNzcycpO1xuXG50eXBlIFN0eWxlT2JqZWN0VHlwZSA9IHtcbiAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICBjb250ZW50OiAnc3RyaW5nJyxcbiAgICBzdGFydDogbnVtYmVyLFxuICAgIGF0dHJzOiBPYmplY3QsXG4gICAgbGFuZzogeyBsYW5nOiBzdHJpbmcgfSxcbiAgICBlbmQ6IG51bWJlclxuIH1cblxuZnVuY3Rpb24gc3R5bGVQYXJzZXIoc3R5bGVPYmplY3RBcnJheTogU3R5bGVPYmplY3RUeXBlW10pOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGlmICghc3R5bGVPYmplY3RBcnJheSAmJiBzdHlsZU9iamVjdEFycmF5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignbWlzc2luZyBzdHlsZSBzZWN0aW9uJykpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm9yIChjb25zdCBzdHlsZU9iamVjdCBvZiBzdHlsZU9iamVjdEFycmF5KSB7XG4gICAgICAgICAgICAgICAgaWYoc3R5bGVPYmplY3QubGFuZyA9PT0gJ3Njc3MnIHx8IHN0eWxlT2JqZWN0LmxhbmcgPT09ICdsZXNzJykge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdTb3JyeSBwbGVhc2Ugb25seSB1c2UgcGxhaW4gQ1NTIGluIHlvdXIgZmlsZXMgZm9yIG5vdycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBvdXRwdXQgPSBuZXcgQ2xlYW5DU1Moe30pLm1pbmlmeShzdHlsZU9iamVjdC5jb250ZW50KTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKG91dHB1dC5zdHlsZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc3R5bGVQYXJzZXI7XG4iXX0=